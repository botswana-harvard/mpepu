
the structure of a django project is

project_folder/
  application_folder/

this README file is in the [application_folder]

First create a new project., For example,

django-admin.py startproject bhp056

...but the project name can be anything.

After creating your new [project], 

A. Checkout source
------------------------
1. change to the project_folder 

cd ~/[project folder]

2. get these apps from the subversion repository

svn co http://192.168.1.50/svn/bhp_basesite
svn co http://192.168.1.50/svn/bhp_templatetags
svn co http://192.168.1.50/svn/bhp_adverse
svn co http://192.168.1.50/svn/bhp_code_lists
svn co http://192.168.1.50/svn/bhp_common
svn co http://192.168.1.50/svn/bhp_search
svn co http://192.168.1.50/svn/bhp_consent
svn co http://192.168.1.50/svn/bhp_pharmacy
svn co http://192.168.1.50/svn/bhp_registration
svn co http://192.168.1.50/svn/bhp_variables
svn co http://192.168.1.50/svn/bhp_visit
svn co http://192.168.1.50/svn/bhp_calendar

B. edit project settings.py
-------------------------

1. Enable admin in urls.py (in project folder)

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

and 

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()


2. Enable admin in settings.py

In the INSTALLED_APPS section uncomment the two lines needed to enable admin,

INSTALLED_APPS = {
    ...
    ...
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    ...
    ...
}

3. Enable django-extensions in settings.py

add this line to the INSTALLED_APPS section

    'django_extensions',

4. Enable 'bhp_' apps in settings.py. Add the following required BHP applications to the INSTALLED_APPS section. 

(Replace [main_app] with the name of your app (e.g. mpepu, mochudi, etc.))

    'mpepu',
    'bhp_common',
    'bhp_consent',
    'bhp_clinic_models',
    'bhp_variables',
    'bhp_registration',
    'bhp_code_lists',
    'bhp_lab',
    'bhp_visit',

5. Enable DB connection in settings.py. Edit the DATABASE section to look something like this (replace with your 'dbname', 'user' and 'password'):

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', 
        'OPTIONS': {
            'init_command': 'SET storage_engine=INNODB',
        },
        'NAME': 'dbname',
        'USER': 'user',
        'PASSWORD': 'password',
        'HOST': '',
        'PORT': '',
    }
}


6. Change time zone in settings.py
TIME_ZONE = 'Africa/Gaborone'


C. Setup tables
-------------------------

1. create the database using the dbname, user and password from settings.py. 

mysql -u [user] -p -Bse 'create database [dbname];'

for example,

mysql -u root -p -Bse 'create database bhp056;'

2. set up a db user other than root

...see wiki and change the settings.py DATABASE section accordingly

2. change to project folder:
cd ~/[project folder]

3. run syncdb:

python manage.py syncdb


D. Start project using 'test' server
-------------------------
to test, run

python manage.py runserver


E. Browse in admin
-------------------------

Go to 

http://localhost:8000/admin


thanks

-erik
